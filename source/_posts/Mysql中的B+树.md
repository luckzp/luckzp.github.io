---
title: Mysql中的B+树
urlname: hmgqx9
date: 2020-09-12 12:19:09 +0800
tags: []
categories: []
---

---

## title: Mysql 中的 B+树 date: 2019-12-25 20:34:49

tags: Mysql

### 索引

mysql 中的索引底层使用的是 B+树，索引存储在硬盘中，而非内存中。考虑性能，要减少磁盘 IO 次数。

构建 M 叉树，M 越大，树的高度越小，磁盘 IO 变少了。

**举例：**

如果 m 叉树中的 m 是 100，那对一亿个数据构建索引，树的高度也只是 3（层数是 4），最多只要 3 次磁盘 IO 就能获取到数据（第一层节点存在内存里）。磁盘 IO 变少了，查找数据的效率也就提高了。

**那 m 叉树中的 m 是不是越大越好呢？到底多大才最合适呢？**

不管是内存中的数据，还是磁盘中的数据，操作系统都是按页（一页大小通常是 4KB，这个值可以通过 getconfig PAGE_SIZE 命令查看）来读取的，一次会读一页的数据。如果要读取的数据量超过一页的大小，就会触发多次 IO 操作。所以，我们在选择 m 大小的时候，要尽量让每个节点的大小等于一个页的大小。读取一个节点，只需要一次磁盘 IO 操作。
